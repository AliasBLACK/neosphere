.TH SSJ 1 "2016-02-21" "minisphere-3.0a2" "minisphere Game Development Kit"
.SH NAME
ssj \- a JavaScript CLI debugger for minisphere
.SH SYNOPSIS
.nh
.na
.TP 4
.B ssj
.RB [ \-\-pause ]
.RB [ \-\-connect " | "
.IR gamefile ]
.ad
.hy
.SH DESCRIPTION
When used in combination with minisphere, SSJ allows you step through a game's code and track its state as it executes.
In this regard it is similar in purpose to other CLI debuggers such as GDB.
The debugger enables you to diagnose bugs and crashes as they happen by tracking program variables, function calls, and objects, all while your game is still running.
.P
Using SSJ, you have to ability to:
.IP \(bu 3
Step through a game's source code one line at a time.
This lets you see the code paths the game takes and often helps illuminate difficult-to-understand bugs.
.IP \(bu 3
Track local variables and their values.
This allows you to see if the game assigns the wrong value to a variable, the effects of which may not manifest until much later on.
It is also possible to change the value of a variable in realtime.
.IP \(bu 3
Examine the contents of JavaScript objects.
Often it's not enough seeing only primitive values and you will need to drill down into an object's properties in order to understand a bug.
.IP \(bu 3
Set breakpoints.
Sometimes you have a good idea of where a bug is, and single-stepping to that point would be too tedious.
By setting a breakpoint on a line of source code, the debugger will automatically pause execution when that line is reached.
.IP \(bu 3
View debug traces.
Games will often log interesting events using the DebugPrint() function.
SSJ will let you see that output.
.P
Unless you use the
.B \-\-connect
option (see below), SSJ will start minisphere for you.
This avoids to need to open a separate terminal for debugging.
Simply provide the name of a Sphere game directory or package as the last argument to the
.BR ssj (1)
command, and SSJ will do the rest.
.SH OPTIONS
.TP
.BR \fB\-c ", " \-\-connect
Connects to a running game which was starting using the
.BR spherun (1)
command.
This can be invaluable by allowing you to debug hard-to-reproduce bugs when they happen.
.TP
.BR \fB\-p ", " \-\-pause
Pauses execution upon attachment.
This stops the game in its tracks so you can view the program state exactly as it is when the debugger was attached.
For newly started games, this allows you to set up breakpoints, etc. before any code is executed.
.IP \fB\-\-version
Show the version number of the installed copy of SSJ along with the version numbers of any libraries it depends on.
.SH COMMANDS
Once attached, SSJ provides a large set of tools for you to use in debugging your game.
Since SSJ is a console debugger, these are provided through a command-line interface.
Below is a list of all commands supported by this version of SSJ:
.TP
.BR \fBbacktrace " or " bt
View the contents of the call stack.
This allows you to see which function calls are in progress and is especially useful in tracing your game's execution path leading up to an error.
.TP
.BR \fBcontinue " or " c
Resume normal execution.
If a breakpoint is hit or an error is thrown which is not caught, SSJ will pause execution again.
.TP
.BR \fBdown " or " d
Move down the callstack relative to the selected frame, towards the innermost call.
A number can be provided which specifies the number of frames to move.
If no argument is given,
.B down
moves down 1 frame.
.TP
.BR \fBeval " or " e
Evaluate a JavaScript expression.
This works exactly like JavaScript
.B eval()
and allows you to examine objects, assign to variables, or anything else you can do with a line of code.
The expression is evaluated in the context of the selected stack frame.
.TP
.BR \fBexamine " or " x
Evaluate a JavaScript expression verbosely.
This performs the same function as
.BR eval ,
but shows runtime data such as heap pointers for any objects in the result.
This is not often useful, but may be in certain circumstances.
.TP
.BR \fBframe " or " f
Select a callstack frame to examine.
Use
.B backtrace
to see the full list of frames on the callstack.
When SSJ stops the program, the innermost frame is selected, which corresponds to the function call currently underway.
Sometimes it's necessary when investigating a bug to view the state earlier in the call chain.
To that end, the
.frame
command changes the context used for the following commands:
.BR eval ", " list ", and " vars.
The program counter isn't affected such that
.B continue
or stepping commands will resume execution in the innermost call regardless of the selected frame.
.TP
.BR \fBlist " or " l
Print a few lines of source code surrounding the line currently being executed.
By default, 10 lines of source are shown.  If you provide a number with the
.B list
command, that number of lines will be printed.
.TP
.BR \fBstepover " or " s
Execute the next line of source code, including all function calls in their entirety.
.TP
.BR \fBstepin " or " si
Execute the next line of source code.
If a function is called, execution will pause at the start of that function.
This lets you trace into functions.
.TP
.BR \fBstepout " or " so
Continue execution until the active function call returns.
Execution will pause again at the call site.
.TP
.BR \fBup " or " u
Move up the callstack relative to the selected frame, towards the outermost call.
A number can be provided which specifies the number of frames to move.
If no argument is given,
.B up
moves up 1 frame.
.TP
.BR \fBvars " or " v
Show local variables for the selected stack frame along with all primitive values.
Non-primitive values such as objects and functions are displayed simply as "{...}" so you will need to use the
.B eval
command to examine them.
.TP
.BR \fBwhere " or " w
Show the function name, filename and current line number for the selected frame, along with the line of code currently being executed.
This can help you to regain your bearings after an extended debugging session.
.P
If you need help with any of these commands while using SSJ, you can use the
.B help
command.
.B help
with no arguments will show the list of usable commands and a short summary of the function of each.
If you need help with a specific command, simply provide that command name as an argument to
.BR help .
.SH BUGS
Report any bugs found in minisphere or the GDK tools to:
.br
.B Bruce Pascoe <fatcerberus@icloud.com>
.SH SEE ALSO
.BR spherun (1),
.BR cell (1)
